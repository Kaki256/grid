import{d as T,u as Z,m as L,r as m,o as c,c as k,p as j,k as ee,t as $,w as _,b as oe,a,e as x,v as F,F as b,g as z,q as te,j as le,l as H}from"./index-BdTa2wRU.js";const se={class:"cell"},W=T({__name:"SimpleCellLook",props:{cellSize:{},color:{},text:{}},setup(N){Z(u=>({"0bcc05a6":v.value,e888a552:i.value,"3d827ddd":u.color}));const g=N,w=L(()=>`${g.cellSize}px`),v=m(w),i=m(w);return(u,S)=>(c(),k("div",se,[j(u.$slots,"default",{},()=>[ee($(g.text||""),1)])]))}}),ne={class:"control"},ae={class:"play-area"},ie={class:"template-buttons"},ue={class:"field"},re={class:"input"},ve=["value"],ce={class:"debug"},ge={class:"search"},fe=T({__name:"RookMoveView",setup(N){const g=m(""),w={gojuuon:`んわらやまはなたさかあ
　　り　みひにちしきい
　　るゆむふぬつすくう
　　れ　めへねてせけえ
　をろよもほのとそこお`,eigo:`ABCDE 
FGHIJ 
KLMNO 
PQRST 
UVWXYZ`},v=m(5);_(v,t=>{sessionStorage.setItem("RookMove_inputLength",t.toString())});const i=L(()=>2*v.value+1),u=L(()=>2*v.value+1),S=m(40),n=m(Array.from({length:i.value},()=>Array.from({length:u.value},()=>"white")));_(v,()=>{let t=Array.from({length:i.value},()=>Array.from({length:u.value},()=>"white"));for(let e=0;e<Math.min(n.value.length,i.value);e++)for(let o=0;o<Math.min(n.value[0].length,u.value);o++)t[e+I(i.value-n.value.length)/2][o+I(u.value-n.value[0].length)/2]=n.value[e+I(n.value.length-i.value)/2][o+I(n.value[0].length-u.value)/2];n.value=t,sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(n.value))});function I(t){return Math.max(0,t)}_(S,t=>{sessionStorage.setItem("RookMove_cellSize",t.toString())}),_(n,t=>{console.log("playareaColor changed"),sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(t))},{deep:!0}),_(g,t=>{sessionStorage.setItem("RookMove_field",t)},{deep:!0});const A=(t,e)=>{console.log(t,e),!(2*t+1==i.value&&2*e+1==u.value)&&(n.value[t][e]=n.value[t][e]==="white"?"black":"white")};let D=!1;const J=(t,e)=>{D=!0,A(t-1,e-1)},P=(t,e)=>{D&&A(t-1,e-1)},q=()=>{D=!1};document.addEventListener("mouseup",q),oe(()=>{console.log("mounted"),console.log(sessionStorage.getItem("RookMove_playareaColor")),sessionStorage.getItem("RookMove_inputLength")?v.value=parseInt(sessionStorage.getItem("RookMove_inputLength")||"5"):sessionStorage.setItem("RookMove_inputLength",v.value.toString()),sessionStorage.getItem("RookMove_cellSize")?S.value=parseInt(sessionStorage.getItem("RookMove_cellSize")||"40"):sessionStorage.setItem("RookMove_cellSize",S.value.toString());const t=Array.from({length:i.value},()=>Array.from({length:u.value},()=>"white"));sessionStorage.getItem("RookMove_playareaColor")?(n.value=JSON.parse(sessionStorage.getItem("RookMove_playareaColor")||"[]"),i.value===0&&(n.value=t)):(sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(n.value)),n.value=t),sessionStorage.getItem("RookMove_field")?g.value=sessionStorage.getItem("RookMove_field")||"":sessionStorage.setItem("RookMove_field",g.value),console.log(n.value),sessionStorage.getItem("RookMove_selectedDict")?M.value=sessionStorage.getItem("RookMove_selectedDict")||"buta":sessionStorage.setItem("RookMove_selectedDict",M.value)});const G=()=>{v.value=5,S.value=40,n.value=[];for(let t=0;t<i.value;t++){n.value.push([]);for(let e=0;e<u.value;e++)n.value[t].push("white")}y.value=[]},R=m(!1),K=()=>{R.value=!R.value},Q=L(()=>R.value?"japanese-monospace":"english-monospace"),U=t=>{g.value=w[t]},B=["buta","eigo","illust1_3","ippan"],M=m(B[0]);_(M,t=>{sessionStorage.setItem("RookMove_selectedDict",t)});const O=m([]),X=async()=>{const e=await(await fetch(`/src/assets/dictionaries/${M.value}.txt`)).text();O.value=e.split(`
`)},y=m([]),Y=async()=>{await X(),y.value=[];const t=g.value.replace(/\r\n/g,`
`).replace(/\r/g,`
`);let e=t.split(`
`);e=t.split(`
`).map(l=>l.toLowerCase()),console.log(e);let o=e.length,r=0;for(let l=0;l<o;l++)r=Math.max(r,e[l].length);const h={};for(let l=0;l<o;l++)for(let s=0;s<r;s++)e[l][s]in[" ","　","_","＿",`
`]||(h[e[l][s]]=[]);let C=[],V=[];const E={x:(i.value+1)/2,y:(u.value+1)/2};for(let l=0;l<i.value;l++)for(let s=0;s<u.value;s++)n.value[l][s]==="black"&&(C.push(s+1-E.x),V.push(l+1-E.y));console.log(C),console.log(V),console.log(o,r);for(let l=0;l<o;l++)for(let s=0;s<r;s++){if([" ","　","_","＿",`
`].includes(e[l][s])){console.log("fieldStrings["+l+"]["+s+"] is space");continue}if(e[l][s]===void 0){console.log("fieldStrings["+l+"]["+s+"] is undefined");continue}for(let d=0;d<C.length;d++){const f=s+C[d],p=l+V[d];if(console.log(l,s,f,p),f<0||f>=r||p<0||p>=o){console.log("("+p+","+f+") is out of range");continue}if([" ","　","_","＿",`
`].includes(e[p][f])){console.log("fieldStrings["+p+"]["+f+"] is space");continue}if(e[p][f]===void 0){console.log("fieldStrings["+p+"]["+f+"] is undefined");continue}console.log(e[l][s],e[p][f]),h[e[l][s]].push(e[p][f])}}console.log(h);for(let l of O.value){if(l.length===1)continue;let s=!0;for(let d=0;d<l.length-1;d++){if(!(l[d]in h)){s=!1;break}if(!h[l[d]].includes(l[d+1])){s=!1;break}}s&&y.value.push(l)}console.log(y.value)};return(t,e)=>(c(),k("div",null,[a("div",ne,[e[7]||(e[7]=a("label",{for:"inputLength"},"inputLength:",-1)),x(a("input",{id:"inputLength",type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o)},null,512),[[F,v.value]]),e[8]||(e[8]=a("label",{for:"cellSize"},"セルサイズ:",-1)),x(a("input",{id:"cellSize",type:"number","onUpdate:modelValue":e[1]||(e[1]=o=>S.value=o)},null,512),[[F,S.value]]),a("button",{onClick:K},$(R.value?"半角にする":"全角にする"),1)]),a("div",ae,[a("div",ie,[a("button",{onClick:e[2]||(e[2]=o=>U("gojuuon"))},"五十音"),a("button",{onClick:e[3]||(e[3]=o=>U("eigo"))},"英語")]),a("div",ue,[(c(!0),k(b,null,z(i.value,o=>(c(),k("div",{class:"row",key:o},[(c(!0),k(b,null,z(u.value,r=>(c(),k("div",{key:o*i.value+r},[2*o-1===i.value&&2*r-1===u.value?(c(),H(W,{key:0,row:o-1,col:r-1,cellSize:S.value,frameSize:1,color:"red",onMousedown:h=>J(o,r),onMouseenter:h=>P(o,r)},null,8,["row","col","cellSize","onMousedown","onMouseenter"])):(c(),H(W,{key:1,row:o-1,col:r-1,cellSize:S.value,frameSize:1,color:n.value[o-1][r-1],onMousedown:h=>J(o,r),onMouseenter:h=>P(o,r)},null,8,["row","col","cellSize","color","onMousedown","onMouseenter"]))]))),128))]))),128))])]),a("div",re,[x(a("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),class:te([Q.value,"input-field"]),rows:"10",cols:"50"},null,2),[[F,g.value]])]),e[9]||(e[9]=a("p",null,"辞書選択",-1)),x(a("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>M.value=o)},[(c(),k(b,null,z(B,o=>a("option",{key:o,value:o},$(o),9,ve)),64))],512),[[le,M.value]]),a("div",ce,[a("button",{onClick:e[6]||(e[6]=o=>G())},"リセット")]),a("div",ge,[a("button",{onClick:Y},"検索"),(c(!0),k(b,null,z(y.value,o=>(c(),k("div",{key:o},$(o),1))),128))])]))}});export{fe as default};
