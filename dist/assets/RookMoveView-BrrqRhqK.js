import{d as O,u as Y,m as E,r as v,o as c,c as k,p as Z,k as j,t as z,w as y,b as ee,a as n,e as C,v as V,F as x,g as b,q as oe,j as te,l as U}from"./index-SMgxHFQq.js";const le={class:"cell"},B=O({__name:"SimpleCellLook",props:{cellSize:{},color:{},text:{}},setup(F){Y(i=>({"0bcc05a6":M.value,e888a552:a.value,"3d827ddd":i.color}));const d=F,h=E(()=>`${d.cellSize}px`),M=v(h),a=v(h);return(i,S)=>(c(),k("div",le,[Z(i.$slots,"default",{},()=>[j(z(d.text||""),1)])]))}}),se={class:"control"},ne={class:"play-area"},ae={class:"template-buttons"},ie={class:"field"},re={class:"input"},ue=["value"],ve={class:"debug"},ce={class:"search"},ge=O({__name:"RookMoveView",setup(F){const d=v(""),h={gojuuon:`んわらやまはなたさかあ
　　り　みひにちしきい
　　るゆむふぬつすくう
　　れ　めへねてせけえ
　をろよもほのとそこお`,eigo:`ABCDE
FGHIJ
KLMNO
PQRST
UVWXYZ`},M=v(5),a=v(2*M.value+1),i=v(2*M.value+1),S=v(40),u=v(Array.from({length:a.value},()=>Array.from({length:i.value},()=>"white")));y([a,i],()=>{let t=Array.from({length:a.value},()=>Array.from({length:i.value},()=>"white"));u.value=t,sessionStorage.setItem("RookMove_H",a.value.toString()),sessionStorage.setItem("RookMove_W",i.value.toString()),sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(u.value))}),y(S,t=>{sessionStorage.setItem("RookMove_cellSize",t.toString())}),y(u,t=>{console.log("playareaColor changed"),sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(t))},{deep:!0}),y(d,t=>{sessionStorage.setItem("RookMove_field",t)},{deep:!0});const H=(t,e)=>{console.log(t,e),!(2*t+1==a.value&&2*e+1==i.value)&&(u.value[t][e]=u.value[t][e]==="white"?"black":"white")};let $=!1;const N=(t,e)=>{$=!0,H(t-1,e-1)},W=(t,e)=>{$&&H(t-1,e-1)},T=()=>{$=!1};document.addEventListener("mouseup",T),ee(()=>{console.log("mounted"),console.log(sessionStorage.getItem("RookMove_playareaColor")),sessionStorage.getItem("RookMove_H")?a.value=parseInt(sessionStorage.getItem("RookMove_H")||"5"):sessionStorage.setItem("RookMove_H",a.value.toString()),sessionStorage.getItem("RookMove_W")?i.value=parseInt(sessionStorage.getItem("RookMove_W")||"5"):sessionStorage.setItem("RookMove_W",i.value.toString()),sessionStorage.getItem("RookMove_cellSize")?S.value=parseInt(sessionStorage.getItem("RookMove_cellSize")||"40"):sessionStorage.setItem("RookMove_cellSize",S.value.toString());const t=Array.from({length:a.value},()=>Array.from({length:i.value},()=>"white"));sessionStorage.getItem("RookMove_playareaColor")?(u.value=JSON.parse(sessionStorage.getItem("RookMove_playareaColor")||"[]"),a.value===0&&(u.value=t)):(sessionStorage.setItem("RookMove_playareaColor",JSON.stringify(u.value)),u.value=t),sessionStorage.getItem("RookMove_field")?d.value=sessionStorage.getItem("RookMove_field")||"":sessionStorage.setItem("RookMove_field",d.value),console.log(u.value)});const q=()=>{a.value=5,i.value=5,S.value=40,u.value=[];for(let t=0;t<a.value;t++){u.value.push([]);for(let e=0;e<i.value;e++)u.value[t].push("white")}_.value=[]},w=v(!1),G=()=>{w.value=!w.value},K=E(()=>w.value?"japanese-monospace":"english-monospace"),A=t=>{d.value=h[t]},D=["buta","eigo","illust1_3","ippan"],I=v(D[0]);y(I,t=>{sessionStorage.setItem("RookMove_selectedDict",t)});const J=v([]),Q=async()=>{const e=await(await fetch(`/src/assets/dictionaries/${I.value}.txt`)).text();J.value=e.split(`
`)},_=v([]),X=async()=>{await Q(),_.value=[];const t=d.value.replace(/\r\n/g,`
`).replace(/\r/g,`
`);let e=t.split(`
`);e=t.split(`
`).map(l=>l.toLowerCase()),console.log(e);let o=e.length,r=0;for(let l=0;l<o;l++)r=Math.max(r,e[l].length);const m={};for(let l=0;l<o;l++)for(let s=0;s<r;s++)e[l][s]in[" ","　","_","＿",`
`]||(m[e[l][s]]=[]);let R=[],L=[];const P={x:(a.value+1)/2,y:(i.value+1)/2};for(let l=0;l<a.value;l++)for(let s=0;s<i.value;s++)u.value[l][s]==="black"&&(R.push(l+1-P.x),L.push(s+1-P.y));console.log(R),console.log(L),console.log(o,r);for(let l=0;l<o;l++)for(let s=0;s<r;s++){if([" ","　","_","＿",`
`].includes(e[l][s])){console.log("fieldStrings["+l+"]["+s+"] is space");continue}if(e[l][s]===void 0){console.log("fieldStrings["+l+"]["+s+"] is undefined");continue}for(let g=0;g<R.length;g++){const f=s+R[g],p=l+L[g];if(console.log(l,s,f,p),f<0||f>=r||p<0||p>=o){console.log("("+p+","+f+") is out of range");continue}if([" ","　","_","＿",`
`].includes(e[p][f])){console.log("fieldStrings["+p+"]["+f+"] is space");continue}if(e[p][f]===void 0){console.log("fieldStrings["+p+"]["+f+"] is undefined");continue}console.log(e[l][s],e[p][f]),m[e[l][s]].push(e[p][f])}}console.log(m);for(let l of J.value){let s=!0;for(let g=0;g<l.length-1;g++){if(!(l[g]in m)){s=!1;break}if(!m[l[g]].includes(l[g+1])){s=!1;break}}s&&_.value.push(l)}console.log(_.value)};return(t,e)=>(c(),k("div",null,[n("div",se,[e[7]||(e[7]=n("label",{for:"inputLength"},"inputLength:",-1)),C(n("input",{id:"inputLength",type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>M.value=o)},null,512),[[V,M.value]]),e[8]||(e[8]=n("label",{for:"cellSize"},"セルサイズ:",-1)),C(n("input",{id:"cellSize",type:"number","onUpdate:modelValue":e[1]||(e[1]=o=>S.value=o)},null,512),[[V,S.value]]),n("button",{onClick:G},z(w.value?"半角にする":"全角にする"),1)]),n("div",ne,[n("div",ae,[n("button",{onClick:e[2]||(e[2]=o=>A("gojuuon"))},"五十音"),n("button",{onClick:e[3]||(e[3]=o=>A("eigo"))},"英語")]),n("div",ie,[(c(!0),k(x,null,b(a.value,o=>(c(),k("div",{class:"row",key:o},[(c(!0),k(x,null,b(i.value,r=>(c(),k("div",{key:o*a.value+r},[2*o-1===a.value&&2*r-1===i.value?(c(),U(B,{key:0,row:o-1,col:r-1,cellSize:S.value,frameSize:1,color:"red",onMousedown:m=>N(o,r),onMouseenter:m=>W(o,r)},null,8,["row","col","cellSize","onMousedown","onMouseenter"])):(c(),U(B,{key:1,row:o-1,col:r-1,cellSize:S.value,frameSize:1,color:u.value[o-1][r-1],onMousedown:m=>N(o,r),onMouseenter:m=>W(o,r)},null,8,["row","col","cellSize","color","onMousedown","onMouseenter"]))]))),128))]))),128))])]),n("div",re,[C(n("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),class:oe([K.value,"input-field"]),rows:"10",cols:"50"},null,2),[[V,d.value]])]),e[9]||(e[9]=n("p",null,"辞書選択",-1)),C(n("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>I.value=o)},[(c(),k(x,null,b(D,o=>n("option",{key:o,value:o},z(o),9,ue)),64))],512),[[te,I.value]]),n("div",ve,[n("button",{onClick:e[6]||(e[6]=o=>q())},"リセット")]),n("div",ce,[n("button",{onClick:X},"検索"),(c(!0),k(x,null,b(_.value,o=>(c(),k("div",{key:o},z(o),1))),128))])]))}});export{ge as default};
